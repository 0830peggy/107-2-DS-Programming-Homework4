library(lubridate); library(stringr); library(purrr); library(readr);
library(httr)
commitHistory <- content(GET("https://api.github.com/repos/r-hub/cranlogs/commits"))
View(commitHistory)
# oneCommitRecord
oneCommitRecord <- commitHistory[[10]]
oneCommitRecord
View(oneCommitRecord)
# df_commit
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name
commitDate=oneCommitRecord$commit$committer$date
# df_commit
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F
)
df_commit
# commit_df_fun
commit_df_fun <- function(oneCommitRecord,df_commit){
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F
return(df_commit)
# commit_df_fun
commit_df_fun <- function(oneCommitRecord,df_commit){
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F,
return(df_commit)
}
# commit_df_fun
commit_df_fun <- function(oneCommitRecord,df_commit){
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F,
return(df_commit)
}
# commit_df_fun
commit_df_fun <- function(oneCommitRecord,df_commit){
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F
)
return(df_commit)
}
commit_df_fun(oneCommitRecord[[10]])
# commit_df_fun
commit_df_fun <- function(oneCommitRecord){
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F
)
return(df_commit)
}
commit_df_fun(oneCommitRecord[[10]])
# commit_df_fun
commit_df_fun <- function(oneCommitRecordInput){
df_commit <- data.frame(
author=oneCommitRecordInput$commit$author$name,
commiter=oneCommitRecordInput$commit$committer$name,
commitDate=oneCommitRecordInput$commit$committer$date,
sha=oneCommitRecordInput$sha,
stringsAsFactors=F
)
return(df_commit)
}
commit_df_fun(oneCommitRecord[[10]])
# oneCommitRecord
oneCommitRecord <- commitHistory[[10]]
oneCommitRecord
# df_commit
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F
)
df_commit
# commit_df_fun
commit_df_fun <- function(oneCommitRecordInput){
df_commit <- data.frame(
author=oneCommitRecordInput$commit$author$name,
commiter=oneCommitRecordInput$commit$committer$name,
commitDate=oneCommitRecordInput$commit$committer$date,
sha=oneCommitRecordInput$sha,
stringsAsFactors=F
)
return(df_commit)
}
commit_df_fun(oneCommitRecord[[10]])
# commit_df_fun
commit_df_fun <- function(oneCommitRecord){
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F
)
return(df_commit)
}
commit_df_fun(commitHistory[[10]])
# commit_df_fun
commit_df_fun <- function(oneCommitRecord){
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F
)
return(df_commit)
}
commit_df_fun(commitHistory[[2]])
# commit_df_fun
commit_df_fun <- function(oneCommitRecord){
df_commit <- data.frame(
author=oneCommitRecord$commit$author$name,
commiter=oneCommitRecord$commit$committer$name,
commitDate=oneCommitRecord$commit$committer$date,
sha=oneCommitRecord$sha,
stringsAsFactors=F
)
return(df_commit)
}
commit_df_fun
# df_allCommits
library(purrr)
map_dfr(commitHistory,df_commit) -> df_allCommits
# df_allCommits
library(purrr)
map_dfr(commitHistory,commit_df_fun) -> df_allCommits
df_allCommits
View(df_allCommits)
# df_allCommits$samePerson
df_allCommits$samePerson <- oneCommitRecord$commit$author$name == oneCommitRecord$commit$committer$name
df_allCommits$samePerson
# df_validCommits
df_validCommits <- df_allCommits[df_allCommits$samePerson]
View(df_allCommits)
# df_validCommits
df_validCommits <- df_allCommits[,df_allCommits$samePerson]
# df_validCommits
df_validCommits <- df_allCommits[,df_allCommits$samePerson==T]
# df_validCommits
df_validCommits <- df_allCommits[df_allCommits$samePerson==T,]
df_validCommits
# df_validCommits
df_validCommits <- df_allCommits[df_allCommits$samePerson,]
df_validCommits
# df_validCommits
df_validCommits <- df_allCommits[df_allCommits$samePerson==T,]
df_validCommits
# df_validCommits$commitDate
df_validCommits$commitDate <- ymd_hms(df_validCommits$commitDate,tz="UTC")
df_validCommits$commitDate <- with_tz(df_validCommits$commitDate,tzone="Asia/Taipei")
df_validCommits$commitDate
View(df_validCommits)
# df_validCommits$hh
df_validCommits$hh <- df_validCommits$commitDate[11,12]
# df_validCommits$hh
df_validCommits$hh <- df_validCommits$commitDate(hour)
# df_validCommits$hh
df_validCommits$hh <- df_validCommits$commitDate(hours)
View(df_validCommits)
# df_validCommits$hh
df_validCommits$hh <- df_validCommits$commitDate[hour]
# df_validCommits$hh
df_validCommits$hh <- (df_validCommits$commitDate,1,3)
# df_validCommits$hh
df_validCommits$hh <- df_validCommits$commitDate(h)
# df_validCommits$hh
df_validCommits$hh <- hour(df_validCommits$commitDate)
df_validCommits$hh
# df_validCommits$hh
df_validCommits$hh <- hour(df_validCommits$commitDate)
class(df_validCommits$hh)
# df_validCommits$hh
df_validCommits$hh <- hour(df_validCommits$commitDate)
df_validCommits$hh <- as.integer(df_validCommits$commitDate)
df_validCommits$commitDate
# df_validCommits$commitDate
df_validCommits$commitDate <- ymd_hms(df_validCommits$commitDate,tz="UTC")
df_validCommits$commitDate <- with_tz(df_validCommits$commitDate,tzone="Asia/Taipei")
df_validCommits$commitDate
# df_validCommits$hh
df_validCommits$hh <- hour(df_validCommits$commitDate)
df_validCommits$hh <- as.integer(df_validCommits$hh)
df_validCommits$hh
# df_validCommits$date
df_validCommits$date <- year(df_validCommits$commitDate),month(df_validCommits$commitDate)
# df_validCommits$date
yy <- year(df_validCommits$commitDate)
mm <- month(df_validCommits$commitDate)
dd <- date(df_validCommits$commitDate)
class(yy)
# df_validCommits$date
yy <- year(df_validCommits$commitDate)
mm <- month(df_validCommits$commitDate)
dd <- date(df_validCommits$commitDate)
dd
# df_validCommits$date
yy <- year(df_validCommits$commitDate)
mm <- month(df_validCommits$commitDate)
dd <- day(df_validCommits$commitDate)
dd
# df_validCommits$date
df_validCommits$date <- date(df_validCommits$commitDate)
class(df_validCommits$date)
# df_validCommits$date
df_validCommits$date <- date(df_validCommits$commitDate)
df_validCommits$date
View(df_allCommits)
View(df_validCommits)
